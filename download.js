const download = require('download');

const st3keyArray = [
  '1FFFE4EBD88F88A2CBD0A33E9DF814B6',
  '6ED5236C525FC62E271091AD5FC43968',
  '1186A0FFDF9BA4DCED5708F79220562C',
  'F7CDB5607699355B99993A97895D3CF8',
  'A7ABC49091C36D40E969BB8F876060E9',
  'AD8272268F5C4DD972543E4895E4586B',
  '8777883FB4E4D988CA2A8224072DED47',
  'BF317591CF63D6D8055A8E42E0CF53B5',
  'B48CB1E256EA255FBACD2571FA5F3C51',
  '8E5EAB6198A98881E8F9BB454C9DBA07',
  'FC793F4AD7790EC14D3013D8B5B0A67B',
  '7QyPEM1hK2LnOR8OJHTbnHOy',
  '9F3D8D5350448BDFF62F35622F0A5123',
  '3BFD19EE46434CD911313A47147D3B26',
  'Ue9qR75QOS7W9kqTQa6eNtr1',
  'D4379F5B75C451872345C211C78048B2',
  '0B0F0E9D0FAF5942574E0AFC675F0CA3',
  '8F071742A87F1C3210F0A728C989DF36',
  'CE99D085EE946625D4B7D6E18114FE13',
  '019F83A17014B30D12A7DDC60B3EC1EB',
  '267284BBC3B99B3550B8FB4523B196A3',
  'FCFC92CC908D0A269118CAC234EE2C6C',
  'rnBgMmQciYl88TZEvw7Ulsc4',
  '947E1CA2DC7A21B919864CC73CE11193',
  'A5411732689F114552F1CF7516010726',
  'CCFB38927C747E93D8107821E1C4990E',
  '2A94BD4DAC3B15F7B9055B3D2386AD7E',
  '023E16C46AB6DE4A04328FE9209143FE',
  'E141DD777F199829B7BDBC0353B30DDC',
  '4C0EC999B0803D315334AD85D09CE966',
  'B18A35B61E4C10EA441343639CB152C8',
  '00BC3C478ED523B6E6CB542918EE6CDD',
  '25AF6D5996E7C0B73EA2B544CDBA2187',
  '92162C74F85062E27720A85776426250',
  '7F93BF7255A5CBD1BE462690C1AC1E70',
  'FAE9C928C3B6D4379060DFC5B345192E',
];

async function downloadWithRetry(file, retries = 3) {
  for (let i = 0; i < retries; i++) {
    try {
      await download(
        `https://d1txs74qdv0iht.cloudfront.net/presets/${file}.json`,
        './presets'
      );
      console.log(`Downloaded: ${file}`);
      break; // Break the loop if download is successful
    } catch (error) {
      console.error(
        `Failed to download ${file}, attempt ${i + 1}/${retries}: ${
          error.message
        }`
      );
      if (i === retries - 1) throw error;
    }
  }
}

(async () => {
  try {
    await Promise.all(st3keyArray.map((file) => downloadWithRetry(file)));
    console.log('All files downloaded successfully');
  } catch (error) {
    console.error('Some files failed to download:', error);
  }
})();
