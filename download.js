const download = require('download');

const st3keyArray = [
  '8A13D7410BC1CF73EDE13D7654F20C0D',
  '65708D02F4592398FE93409FB7AB197B',
  'Tw5tajtgwfsojJWH2tnlwNEP',
  '5059FF8144B729EEAA959346173C3A94',
  '8DC5CADD8248065BDA0B7641A0C42640',
  '0C0E425D2C446A803457EDCB3BF43A7E',
  'JtcBQgTckEu28Pi3KPcyuDRL',
  'B4BB039C5483EE0F9E0166D02F8D69C0',
  'AF67813EF396006D609AF74F70265D29',
  'CF1CA9AED76610002970BFAFDBD318A1',
  '89228EE073B974C0DC83241137AD2957',
  'FB5066609445221C96C16C989781AFA1',
  '46D6C24B09A9C5FB49EDE9D0D5684D4A',
  '5FE5F0D57FE7A5BE03C88571F3E54C50',
  'B442B5CD7D018DB0519C36BCA709DAF0',
  'DE91D3C4D7EF1D75140DB5D588252AE1',
  'A85B06C215080C0BAE9BD515669C3CB9',
  'BDDD5AB8C2D1BBFD1147DD1507CFE5A5',
  'lv7PtmgsVR5Puuq815NZPTgk',
  'LEWtHZDEElb7HiNVJ2NCTed8',
  'm08j3kAA6rVHqohQXbphaopt',
  'bVaHzY7qJFm846vhQU6iyuAY',
  'iGJ7XPXRpBZlXy17rU2ctNzX',
  'AncRZatcFHVIy44eepHUi95R',
  'AA58D1F5D6307EB7C177DC95E88D4059',
  '10EA7154CC86463563CCB26AB51F179B',
  '7C1E483D0C8BF5B1D1954AA6F407ACA4',
  'NtfUkXzMzOk4QEN4qog82Gey',
  '9155D7C3B629BE1019C98B830897E03D',
  '89D8106F0D310BCB1673F60F72B9522B',
  'M2zYSuWCxDUdVmR9aJWPFXXJ',
  '655008B60589541BD7F02D02FD055069',
  'OVCJHmV9Mh1g4sQg98dim5Kb',
  'lXf4EiA8sBOpHTR1vKKlNr12',
  '6442709D8EBBEB802B54B31C7B6D7577',
  'j1DucWV2JrJOhXTfPTgQOzbg',
  'BC827240EEE9213B876376D34DEF357F',
  'hHFGg8NyIy9hWbkuQpXLiVaI',
  '95cqIjxH0CQeUQSAfrLslRYA',
  '1CE6A6C7C4B82C8C391FA50574F4A104',
  '26F0614C46DE36DA38FBD9872FDB55EE',
  'CEB9CC5F635DD628D5B61567A60489F7',
  '110F2A399E503784D1100CFF5183A431',
  'ACB9F98D6E2AAAEF89B75BA50EEA7836',
  'F0BA5BF70F2E939B011A075B12BE9E77',
  '7C17BA30AEEF03D8C2A0DCECA7E955AF',
  'UwdEYNjIImZrW7Wdf6upfbQ7',
  '421D049824D67FC4FD35883A325E70B6',
  'DBEA50CA2EC451521D80F881BD5150DA',
  '1C2ADCBC6B99224B259FFC780A46B434',
  'D27B6A3CE9691D9C191CA6707A044FDF',
  '770b8a41f87ed52d9deac3ab5a1ed4ec',
];

async function downloadWithRetry(file, retries = 3) {
  for (let i = 0; i < retries; i++) {
    try {
      await download(
        `https://d1txs74qdv0iht.cloudfront.net/presets/${file}.json`,
        './presets'
      );
      console.log(`Downloaded: ${file}`);
      break; // Break the loop if download is successful
    } catch (error) {
      console.error(
        `Failed to download ${file}, attempt ${i + 1}/${retries}: ${
          error.message
        }`
      );
      if (i === retries - 1) throw error;
    }
  }
}

(async () => {
  try {
    await Promise.all(st3keyArray.map((file) => downloadWithRetry(file)));
    console.log('All files downloaded successfully');
  } catch (error) {
    console.error('Some files failed to download:', error);
  }
})();
